<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <title>–ü–æ—Å—Ç—ã ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <style>
            :root {
                --bg: #0f172a;
                --bg-soft: #111827;
                --bg-softer: #020817;
                --border: #1f2937;
                --accent: #38bdf8;
                --accent-soft: rgba(56, 189, 248, 0.14);
                --accent-muted: rgba(56, 189, 248, 0.06);
                --text: #e5e7eb;
                --text-soft: #9ca3af;
                --radius-xl: 18px;
                --radius-md: 10px;
                --radius-sm: 7px;
                --shadow-soft: 0 18px 60px rgba(15, 23, 42, 0.9);
                --font-ui:
                    system-ui, -apple-system, BlinkMacSystemFont, -sans-serif;
                --font-mono:
                    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                    "Liberation Mono", "Courier New", monospace;
                --transition-fast: 0.18s ease-out;
            }

            * {
                box-sizing: border-box;
            }

            html,
            body {
                margin: 0;
                padding: 0;
                height: 100%;
                background: radial-gradient(
                    circle at top,
                    #111827 0%,
                    #020817 42%,
                    #000 100%
                );
                color: var(--text);
                font-family: var(--font-ui);
            }

            body {
                display: flex;
                align-items: stretch;
                justify-content: center;
                padding: 20px;
                font-size: 14px;
            }

            .app {
                display: flex;
                flex-direction: column;
                width: min(1440px, 100%);
                height: calc(100vh - 40px);
                border-radius: 26px;
                padding: 18px 18px 16px;
                background:
                    radial-gradient(
                        circle at top left,
                        rgba(56, 189, 248, 0.14),
                        transparent 55%
                    ),
                    radial-gradient(
                        circle at top right,
                        rgba(129, 140, 248, 0.12),
                        transparent 50%
                    ),
                    radial-gradient(
                        circle at bottom,
                        rgba(15, 23, 42, 0.9),
                        #020817
                    );
                box-shadow: var(--shadow-soft);
                border: 1px solid rgba(148, 163, 253, 0.16);
                backdrop-filter: blur(32px);
                overflow: hidden;
            }

            .app-header {
                display: flex;
                align-items: center;
                gap: 14px;
                padding: 6px 10px 12px;
                border-radius: 18px;
                border: 1px solid rgba(75, 85, 99, 0.7);
                background: linear-gradient(
                    to right,
                    rgba(15, 23, 42, 0.98),
                    rgba(9, 9, 11, 0.98)
                );
                box-shadow: 0 14px 40px rgba(15, 23, 42, 0.85);
            }

            .brand-badge {
                width: 34px;
                height: 34px;
                border-radius: 12px;
                background:
                    radial-gradient(circle at 30% 0%, #38bdf8, transparent),
                    radial-gradient(circle at 100% 0%, #6366f1, transparent),
                    radial-gradient(circle at 0% 100%, #22c55e, transparent),
                    #020817;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #e5e7eb;
                font-size: 18px;
                font-weight: 700;
                box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
                border: 1px solid rgba(148, 163, 253, 0.5);
            }

            .app-title-wrap {
                display: flex;
                flex-direction: column;
                gap: 2px;
            }

            .app-title {
                font-size: 19px;
                font-weight: 600;
                letter-spacing: 0.03em;
                color: #e5e7eb;
            }

            .app-subtitle {
                display: none;
            }

            .app-actions {
                margin-left: auto;
                display: flex;
                align-items: center;
                gap: 8px;
                font-size: 10px;
                color: var(--text-soft);
            }

            .pill {
                display: none;
            }

            .pill span.icon {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 14px;
                height: 14px;
                border-radius: 999px;
                background: rgba(56, 189, 248, 0.18);
                color: var(--accent);
                font-size: 10px;
            }

            .layout {
                flex: 1;
                display: grid;
                grid-template-columns: minmax(240px, 340px) minmax(0, 1fr);
                gap: 12px;
                margin-top: 10px;
            }

            /* Sidebar */

            .sidebar {
                display: flex;
                flex-direction: column;
                gap: 8px;
                padding: 10px;
                border-radius: var(--radius-xl);
                background: radial-gradient(
                    circle at top,
                    rgba(15, 23, 42, 0.98),
                    rgba(9, 9, 11, 1)
                );
                border: 1px solid rgba(75, 85, 99, 0.9);
                box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
                overflow: hidden;
            }

            .sidebar-header {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .sidebar-title-row {
                display: flex;
                align-items: center;
                gap: 6px;
            }

            .sidebar-title-label {
                font-size: 11px;
                padding: 3px 8px;
                border-radius: 999px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                color: var(--accent);
                background-color: rgba(15, 23, 42, 1);
                display: inline-flex;
                align-items: center;
                gap: 6px;
            }

            .sidebar-title-label span.dot {
                width: 6px;
                height: 6px;
                border-radius: 999px;
                background-color: #22c55e;
                box-shadow: 0 0 8px rgba(34, 197, 94, 0.9);
            }

            .sidebar-title {
                font-size: 16px;
                font-weight: 500;
                color: #e5e7eb;
            }

            .sidebar-note {
                font-size: 14px;
                color: var(--text-soft);
            }

            .sidebar-search {
                margin-top: 4px;
                display: flex;
                gap: 6px;
                align-items: center;
            }

            .sidebar-search-input-wrap {
                flex: 1;
                position: relative;
            }

            .sidebar-search-input {
                width: 100%;
                padding: 7px 9px 7px 24px;
                border-radius: 999px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                background-color: rgba(9, 9, 11, 1);
                color: var(--text);
                font-size: 14px;
                outline: none;
                transition:
                    border-color var(--transition-fast),
                    box-shadow var(--transition-fast),
                    background-color var(--transition-fast);
            }

            .sidebar-search-input::placeholder {
                color: #6b7280;
            }

            .sidebar-search-input:focus {
                border-color: var(--accent);
                box-shadow: 0 0 18px rgba(56, 189, 248, 0.24);
                background-color: rgba(2, 6, 23, 1);
            }

            .sidebar-search-icon {
                position: absolute;
                left: 7px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 10px;
                color: #6b7280;
            }

            .sidebar-clear-btn {
                padding: 5px 8px;
                border-radius: 999px;
                font-size: 14px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                background-color: rgba(9, 9, 11, 1);
                color: var(--text-soft);
                cursor: pointer;
                display: inline-flex;
                align-items: center;
                gap: 4px;
                transition: all var(--transition-fast);
            }

            .sidebar-clear-btn:hover {
                color: var(--accent);
                border-color: var(--accent);
                background-color: rgba(15, 23, 42, 1);
                box-shadow: 0 0 12px rgba(56, 189, 248, 0.2);
            }

            .post-list {
                margin: 4px 0 0;
                padding: 4px;
                flex: 1;
                border-radius: 14px;
                background: radial-gradient(
                    circle at top,
                    rgba(17, 24, 39, 1),
                    rgba(2, 6, 23, 1)
                );
                border: 1px solid rgba(55, 65, 81, 0.9);
                overflow-y: auto;
                font-size: 11px;
                scrollbar-width: thin;
                scrollbar-color: rgba(75, 85, 99, 0.9) transparent;
            }

            .post-list::-webkit-scrollbar {
                width: 5px;
            }

            .post-list::-webkit-scrollbar-track {
                background-color: transparent;
            }

            .post-list::-webkit-scrollbar-thumb {
                background-color: rgba(75, 85, 99, 0.9);
                border-radius: 999px;
            }

            .post-item {
                padding: 9px 10px;
                border-radius: 11px;
                margin-bottom: 4px;
                cursor: pointer;
                display: flex;
                flex-direction: column;
                gap: 2px;
                border: 1px solid transparent;
                background: transparent;
                transition: all var(--transition-fast);
                position: relative;
            }

            .post-item:hover {
                background:
                    radial-gradient(
                        circle at top left,
                        rgba(56, 189, 248, 0.06),
                        transparent
                    ),
                    rgba(6, 8, 16, 1);
                border-color: rgba(75, 85, 99, 0.9);
                box-shadow: 0 8px 20px rgba(15, 23, 42, 0.9);
                transform: translateY(-1px);
            }

            .post-item.active {
                border-color: var(--accent);
                background:
                    radial-gradient(
                        circle at top left,
                        rgba(56, 189, 248, 0.18),
                        transparent
                    ),
                    var(--bg-soft);
                box-shadow: 0 10px 26px rgba(15, 23, 42, 0.95);
            }

            .post-id {
                font-size: 14px;
                color: var(--accent);
                opacity: 0.96;
            }

            .post-title {
                font-size: 14px;
                font-weight: 500;
                color: #e5e7eb;
            }

            .post-short {
                font-size: 14px;
                color: var(--text-soft);
                line-height: 1.5;
            }

            .post-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 4px;
                margin-top: 2px;
            }

            .post-tag {
                font-size: 8px;
                padding: 2px 6px;
                border-radius: 999px;
                background-color: rgba(15, 23, 42, 1);
                color: var(--text-soft);
                border: 1px solid rgba(55, 65, 81, 0.9);
            }

            .no-results {
                padding: 8px;
                font-size: 14px;
                color: var(--text-soft);
            }

            /* Content */

            .content {
                display: flex;
                flex-direction: column;
                padding: 10px;
                border-radius: var(--radius-xl);
                background: radial-gradient(
                    circle at top,
                    rgba(15, 23, 42, 0.98),
                    rgba(9, 9, 11, 1)
                );
                border: 1px solid rgba(75, 85, 99, 0.9);
                box-shadow: 0 18px 40px rgba(15, 23, 42, 0.92);
                gap: 8px;
                overflow: hidden;
            }

            .content-header {
                display: flex;
                align-items: center;
                gap: 6px;
            }

            .content-label {
                font-size: 9px;
                padding: 3px 8px;
                border-radius: 999px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                color: var(--accent);
                background-color: rgba(9, 9, 11, 1);
                display: inline-flex;
                align-items: center;
                gap: 6px;
            }

            .content-label span.dot {
                width: 6px;
                height: 6px;
                border-radius: 999px;
                background-color: #6366f1;
                box-shadow: 0 0 8px rgba(99, 102, 241, 0.9);
            }

            .content-info {
                margin-left: auto;
                font-size: 9px;
                color: var(--text-soft);
                display: flex;
                gap: 10px;
                align-items: center;
            }

            .content-title {
                margin-top: 2px;
                font-size: 20px;
                font-weight: 500;
                color: #e5e7eb;
            }

            .content-short {
                margin-top: 4px;
                font-size: 14px;
                color: var(--text-soft);
            }

            .content-toolbar {
                margin-top: 4px;
                display: flex;
                gap: 6px;
                align-items: center;
                font-size: 9px;
                flex-wrap: wrap;
            }

            .copy-btn,
            .copy-plain-btn {
                padding: 7px 11px;
                border-radius: 999px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                background-color: rgba(9, 9, 11, 1);
                color: var(--text-soft);
                display: inline-flex;
                align-items: center;
                gap: 6px;
                cursor: pointer;
                transition: all var(--transition-fast);
                user-select: none;
            }

            .copy-btn span.icon,
            .copy-plain-btn span.icon {
                width: 14px;
                height: 14px;
                border-radius: 6px;
                background-color: var(--accent-soft);
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
                color: var(--accent);
            }

            .copy-btn:hover,
            .copy-plain-btn:hover {
                border-color: var(--accent);
                color: var(--accent);
                box-shadow: 0 0 18px rgba(56, 189, 248, 0.24);
                transform: translateY(-1px);
                background-color: rgba(6, 8, 16, 1);
            }

            .copy-btn.copied,
            .copy-plain-btn.copied {
                border-color: #22c55e;
                color: #22c55e;
                box-shadow: 0 0 18px rgba(34, 197, 94, 0.26);
            }

            .copy-btn.copied span.icon,
            .copy-plain-btn.copied span.icon {
                background-color: rgba(34, 197, 94, 0.18);
                color: #22c55e;
            }

            .content-meta-pill {
                padding: 3px 8px;
                border-radius: 999px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                color: var(--text-soft);
                display: inline-flex;
                gap: 4px;
                align-items: center;
            }

            .content-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 4px;
                font-size: 14px;
                margin-left: 2px;
            }

            .content-tag {
                padding: 2px 6px;
                border-radius: 999px;
                border: 1px solid rgba(75, 85, 99, 0.9);
                color: var(--accent);
                background-color: rgba(2, 6, 23, 1);
            }

            .content-body-wrap {
                margin-top: 4px;
                position: relative;
                flex: 1;
                display: flex;
                flex-direction: column;
                border-radius: 16px;
                background:
                    radial-gradient(
                        circle at top left,
                        rgba(56, 189, 248, 0.06),
                        transparent
                    ),
                    rgba(3, 7, 18, 1);
                border: 1px solid rgba(31, 41, 55, 0.95);
                overflow: hidden;
            }

            .content-body {
                padding: 12px 12px 11px;
                font-size: 14px;
                line-height: 1.7;
                white-space: pre-wrap;
                color: var(--text);
                overflow-y: auto;
                flex: 1;
                scrollbar-width: thin;
                scrollbar-color: rgba(75, 85, 99, 0.9) transparent;
            }

            .content-body::-webkit-scrollbar {
                width: 6px;
            }

            .content-body::-webkit-scrollbar-track {
                background: transparent;
            }

            .content-body::-webkit-scrollbar-thumb {
                background-color: rgba(75, 85, 99, 0.9);
                border-radius: 999px;
            }

            .content-watermark {
                position: absolute;
                right: 10px;
                bottom: 4px;
                font-size: 7px;
                color: rgba(75, 85, 99, 0.9);
                pointer-events: none;
            }

            .hint {
                margin-top: 4px;
                font-size: 14px;
                color: var(--text-soft);
                opacity: 0.9;
            }

            @media (max-width: 900px) {
                .layout {
                    grid-template-columns: minmax(0, 1fr);
                    grid-template-rows: auto auto;
                }
                .app {
                    height: auto;
                    min-height: 100vh;
                }
                .content-body {
                    max-height: 45vh;
                }
            }

            @media (max-width: 600px) {
                .app {
                    padding: 12px;
                    border-radius: 0;
                    border: none;
                    box-shadow: none;
                }

                .app-header {
                    border-radius: 14px;
                }

                .sidebar,
                .content {
                    border-radius: 14px;
                }
            }
        </style>
    </head>
    <body>
        <div
            id="authOverlay"
            style="
                position: fixed;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                background: radial-gradient(
                    circle at top,
                    rgba(15, 23, 42, 0.96),
                    rgba(2, 6, 23, 0.98)
                );
                backdrop-filter: blur(18px);
                z-index: 50;
            "
        >
            <div
                style="
                    width: 100%;
                    max-width: 360px;
                    border-radius: 18px;
                    padding: 16px 16px 12px;
                    background:
                        radial-gradient(
                            circle at top left,
                            rgba(56, 189, 248, 0.16),
                            transparent
                        ),
                        rgba(3, 7, 18, 0.98);
                    border: 1px solid rgba(75, 85, 99, 0.95);
                    box-shadow: 0 24px 70px rgba(15, 23, 42, 0.98);
                    color: #e5e7eb;
                    font-family:
                        system-ui,
                        -apple-system,
                        BlinkMacSystemFont,
                        -sans-serif;
                "
            >
                <div
                    style="
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        margin-bottom: 8px;
                    "
                >
                    <div
                        style="
                            width: 30px;
                            height: 30px;
                            border-radius: 11px;
                            background:
                                radial-gradient(
                                    circle at 20% 0%,
                                    #38bdf8,
                                    transparent
                                ),
                                radial-gradient(
                                    circle at 100% 0%,
                                    #6366f1,
                                    transparent
                                ),
                                #020817;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: 700;
                            font-size: 16px;
                            border: 1px solid rgba(148, 163, 253, 0.6);
                            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.95);
                        "
                    >
                        A
                    </div>
                    <div>
                        <div style="font-size: 16px; font-weight: 600">
                            –î–æ—Å—Ç—É–ø –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø–æ—Å—Ç–æ–≤
                        </div>
                        <div style="font-size: 14px; color: #9ca3af">
                            –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                            –º–∞—Ç–µ—Ä–∏–∞–ª—ã.
                        </div>
                    </div>
                </div>
                <div style="margin-top: 4px">
                    <label
                        for="accessPassword"
                        style="
                            display: block;
                            font-size: 10px;
                            color: #9ca3af;
                            margin-bottom: 4px;
                        "
                    >
                        –ü–∞—Ä–æ–ª—å
                    </label>
                    <input
                        id="accessPassword"
                        type="password"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                        style="
                            width: 100%;
                            padding: 8px 10px;
                            border-radius: 9px;
                            border: 1px solid rgba(75, 85, 99, 0.95);
                            background-color: rgba(9, 9, 11, 1);
                            color: #e5e7eb;
                            font-size: 14px;
                            outline: none;
                            box-sizing: border-box;
                        "
                    />
                </div>
                <div
                    style="
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        margin-top: 8px;
                    "
                >
                    <button
                        id="accessSubmit"
                        type="button"
                        style="
                            padding: 7px 12px;
                            border-radius: 999px;
                            border: 1px solid rgba(56, 189, 248, 0.9);
                            background: linear-gradient(
                                to right,
                                rgba(56, 189, 248, 0.16),
                                rgba(15, 23, 42, 1)
                            );
                            color: #38bdf8;
                            font-size: 10px;
                            cursor: pointer;
                            display: inline-flex;
                            align-items: center;
                            gap: 6px;
                        "
                    >
                        <span>–í–æ–π—Ç–∏</span>
                    </button>
                    <div
                        id="accessError"
                        style="font-size: 9px; color: #f97373; display: none"
                    >
                        –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å.
                    </div>
                </div>
                <div style="margin-top: 6px; font-size: 12px; color: #6b7280">
                    –î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ù–µ
                    –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å—Å—ã–ª–∫—É –∏ –ø–∞—Ä–æ–ª—å –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º.
                </div>
            </div>
        </div>

        <div class="app">
            <header class="app-header">
                <div class="brand-badge">A</div>
                <div class="app-title-wrap">
                    <div class="app-title">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ—Å—Ç–æ–≤</div>
                </div>
            </header>

            <main class="layout">
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <div class="sidebar-title-row">
                            <div class="sidebar-title">–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤</div>
                        </div>
                        <div class="sidebar-note">
                            –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–ø—Ä–∞–≤–∞ –∏
                            –±—ã—Å—Ç—Ä–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ.
                        </div>
                    </div>
                    <div class="sidebar-search">
                        <div class="sidebar-search-input-wrap">
                            <span class="sidebar-search-icon">üîç</span>
                            <input
                                id="searchInput"
                                class="sidebar-search-input"
                                type="text"
                                placeholder="–§–∏–ª—å—Ç—Ä –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, –æ–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ —Ç–µ–≥–∞–º..."
                            />
                        </div>
                        <button
                            id="clearSearch"
                            class="sidebar-clear-btn"
                            type="button"
                        >
                            <span>‚úï</span>
                            <span>–°–±—Ä–æ—Å</span>
                        </button>
                    </div>
                    <div
                        id="postList"
                        class="post-list"
                        aria-label="–°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤"
                    ></div>
                    <div
                        id="noResults"
                        class="no-results"
                        style="display: none"
                    >
                        –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ —Ç–µ–∫—É—â–µ–º—É —Ñ–∏–ª—å—Ç—Ä—É.
                    </div>
                </aside>

                <section class="content">
                    <div class="content-header">
                        <div class="content-label">
                            <span class="dot"></span>
                            <span>–î–µ—Ç–∞–ª–∏ –ø–æ—Å—Ç–∞</span>
                        </div>
                        <div class="content-info">
                            <div id="postIdInfo">ID: ‚Äî</div>
                            <div id="postLengthInfo">0 —Å–∏–º–≤–æ–ª–æ–≤</div>
                        </div>
                    </div>

                    <h1 id="postTitle" class="content-title">
                        –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç —Å–ª–µ–≤–∞
                    </h1>
                    <div
                        id="postShort"
                        class="content-short"
                        style="display: none"
                    >
                        <!-- short —Å–∫—Ä—ã—Ç –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è -->
                    </div>

                    <div class="content-toolbar">
                        <button
                            id="copyHtmlBtn"
                            class="copy-btn"
                            type="button"
                            disabled
                        >
                            <span class="icon">‚ßâ</span>
                            <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç</span>
                        </button>
                        <button
                            id="copyPlainBtn"
                            class="copy-plain-btn"
                            type="button"
                            disabled
                        >
                            <span class="icon">‚ßâ</span>
                            <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å</span>
                        </button>
                    </div>

                    <div class="content-body-wrap">
                        <div id="postContent" class="content-body"></div>
                        <div class="content-watermark">
                            Generated from posts.json ‚Ä¢ –ª–æ–∫–∞–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞
                        </div>
                    </div>

                    <div class="hint">
                        ‚Ä¢ –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: —Ñ–∞–π–ª
                        <code
                            style="
                                font-family: var(--font-mono);
                                font-size: 8px;
                            "
                            >posts/posts.json</code
                        >. –û–±–Ω–æ–≤–∏—Ç–µ JSON ‚Äî –∏ —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ –æ–±–Ω–æ–≤–∏—Ç—Å—è
                        –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
                    </div>
                </section>
            </main>
        </div>

        <script>
            // –ü—É—Ç—å –∫ JSON –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ index.html
            const JSON_PATH = "posts.json";

            const state = {
                posts: [],
                filtered: [],
                activeId: null,
                lastCopyTimeout: null,
            };

            const elements = {
                postList: document.getElementById("postList"),
                noResults: document.getElementById("noResults"),
                searchInput: document.getElementById("searchInput"),
                clearSearch: document.getElementById("clearSearch"),
                postIdInfo: document.getElementById("postIdInfo"),
                postLengthInfo: document.getElementById("postLengthInfo"),
                postTitle: document.getElementById("postTitle"),
                postShort: document.getElementById("postShort"),
                postContent: document.getElementById("postContent"),
                copyHtmlBtn: document.getElementById("copyHtmlBtn"),
                copyPlainBtn: document.getElementById("copyPlainBtn"),
            };

            const ACCESS_KEY = "azbuka_posts_access";
            const ACCESS_PASSWORD = "azbuka2024"; // –°–ú–ï–ù–ò –ü–ê–†–û–õ–¨ –ó–î–ï–°–¨ –ü–û–î –°–ï–ë–Ø

            init();

            function init() {
                setupAccessGate();

                // –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø (localStorage), —Å—Ä–∞–∑—É –≥—Ä—É–∑–∏–º –ø–æ—Å—Ç—ã
                if (hasAccess()) {
                    unlockUI();
                    loadAndRender();
                }
            }

            function loadAndRender() {
                loadPosts()
                    .then(() => {
                        renderList();
                        autoSelectFirst();
                        bindEvents();
                    })
                    .catch((error) => {
                        console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON:", error);
                        elements.postList.innerHTML = "";
                        elements.noResults.style.display = "block";
                        elements.noResults.textContent =
                            "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å posts.json. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–∞.";
                    });
            }

            function setupAccessGate() {
                const overlay = document.getElementById("authOverlay");
                const input = document.getElementById("accessPassword");
                const submit = document.getElementById("accessSubmit");
                const errorEl = document.getElementById("accessError");

                if (!overlay || !input || !submit || !errorEl) {
                    // –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ—Ç overlay, –ø—Ä–æ—Å—Ç–æ –¥–∞—ë–º –¥–æ—Å—Ç—É–ø
                    loadAndRender();
                    return;
                }

                // –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø ‚Äî —Å–∫—Ä—ã–≤–∞–µ–º overlay
                if (hasAccess()) {
                    overlay.style.display = "none";
                    return;
                }

                const tryUnlock = () => {
                    const val = (input.value || "").trim();
                    if (!val) return;
                    if (val === ACCESS_PASSWORD) {
                        setAccess();
                        errorEl.style.display = "none";
                        unlockUI();
                        overlay.style.opacity = "0";
                        overlay.style.pointerEvents = "none";
                        setTimeout(() => {
                            overlay.style.display = "none";
                        }, 220);
                        loadAndRender();
                    } else {
                        errorEl.style.display = "block";
                    }
                };

                submit.addEventListener("click", tryUnlock);
                input.addEventListener("keydown", (e) => {
                    if (e.key === "Enter") {
                        tryUnlock();
                    }
                });
            }

            function hasAccess() {
                try {
                    return window.localStorage.getItem(ACCESS_KEY) === "1";
                } catch (_) {
                    return false;
                }
            }

            function setAccess() {
                try {
                    window.localStorage.setItem(ACCESS_KEY, "1");
                } catch (_) {
                    // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º, –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å
                }
            }

            function unlockUI() {
                // —Å–µ–π—á–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã—Ç—å overlay; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
            }

            async function loadPosts() {
                const response = await fetch(JSON_PATH, { cache: "no-cache" });
                if (!response.ok) {
                    throw new Error("HTTP " + response.status);
                }
                const data = await response.json();
                const posts = Array.isArray(data)
                    ? data
                    : Array.isArray(data.posts)
                      ? data.posts
                      : [];

                state.posts = posts;
                state.filtered = posts.slice();
            }

            function bindEvents() {
                elements.searchInput.addEventListener("input", onSearchChange);
                elements.clearSearch.addEventListener("click", clearSearch);
                elements.copyHtmlBtn.addEventListener("click", () =>
                    copyCurrent("html"),
                );
                elements.copyPlainBtn.addEventListener("click", () =>
                    copyCurrent("plain"),
                );
            }

            function onSearchChange() {
                const q = elements.searchInput.value.trim().toLowerCase();
                if (!q) {
                    state.filtered = state.posts.slice();
                } else {
                    state.filtered = state.posts.filter((post) => {
                        const title = (post.title || "").toLowerCase();
                        const tags = (post.tags || []).join(" ").toLowerCase();
                        const content = (post.content || "").toLowerCase();
                        return (
                            title.includes(q) ||
                            tags.includes(q) ||
                            content.includes(q)
                        );
                    });
                }
                renderList();
                if (!state.filtered.length) {
                    clearActivePostView();
                } else if (
                    !state.filtered.some((p) => p.id === state.activeId)
                ) {
                    autoSelectFirst();
                }
            }

            function clearSearch() {
                elements.searchInput.value = "";
                state.filtered = state.posts.slice();
                renderList();
                autoSelectFirst();
            }

            function renderList() {
                const list = elements.postList;
                list.innerHTML = "";

                if (!state.filtered.length) {
                    elements.noResults.style.display = "block";
                    return;
                }

                elements.noResults.style.display = "none";

                state.filtered
                    .slice()
                    .sort((a, b) => {
                        if (a.id == null && b.id == null) return 0;
                        if (a.id == null) return 1;
                        if (b.id == null) return -1;
                        return a.id - b.id; // –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é ID
                    })
                    .forEach((post) => {
                        const item = document.createElement("div");
                        item.className =
                            "post-item" +
                            (post.id === state.activeId ? " active" : "");
                        item.dataset.id = post.id;

                        const idSpan = document.createElement("div");
                        idSpan.className = "post-id";
                        idSpan.textContent =
                            post.id !== undefined && post.id !== null
                                ? `ID: ${post.id}`
                                : "ID: ‚Äî";

                        const titleDiv = document.createElement("div");
                        titleDiv.className = "post-title";
                        titleDiv.textContent = post.title || "–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞";

                        item.appendChild(idSpan);
                        item.appendChild(titleDiv);

                        item.addEventListener("click", () =>
                            setActivePost(post.id),
                        );

                        list.appendChild(item);
                    });
            }

            function autoSelectFirst() {
                if (!state.filtered.length) {
                    clearActivePostView();
                    return;
                }
                const sorted = state.filtered.slice().sort((a, b) => {
                    if (a.id == null && b.id == null) return 0;
                    if (a.id == null) return 1;
                    if (b.id == null) return -1;
                    return a.id - b.id;
                });
                const first = sorted[0];
                if (first) {
                    setActivePost(first.id);
                }
            }

            function setActivePost(id) {
                state.activeId = id;
                const post = state.posts.find((p) => p.id === id);
                updateActiveStyles();
                if (!post) {
                    clearActivePostView();
                    return;
                }

                elements.postTitle.textContent = post.title || "–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞";
                // short –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Å–∫—Ä—ã–≤–∞–µ–º
                elements.postShort.textContent = "";
                elements.postShort.style.display = "none";

                // –¢–µ–≥–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º, —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ (—ç–ª–µ–º–µ–Ω—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

                const content = post.content || "";
                elements.postContent.textContent = content;

                const length = content.length;
                elements.postIdInfo.textContent =
                    post.id !== undefined && post.id !== null
                        ? `ID: ${post.id}`
                        : "ID: ‚Äî";
                elements.postLengthInfo.textContent = `${length} —Å–∏–º–≤–æ–ª–æ–≤`;

                const hasContent = !!content;
                elements.copyHtmlBtn.disabled = !hasContent;
                elements.copyPlainBtn.disabled = !hasContent;
                resetCopyButtons();
            }

            function clearActivePostView() {
                state.activeId = null;
                elements.postTitle.textContent = "–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç —Å–ª–µ–≤–∞";
                elements.postShort.textContent = "";
                elements.postShort.style.display = "none";
                elements.postContent.textContent = "";
                elements.postIdInfo.textContent = "ID: ‚Äî";
                elements.postLengthInfo.textContent = "0 —Å–∏–º–≤–æ–ª–æ–≤";
                elements.copyHtmlBtn.disabled = true;
                elements.copyPlainBtn.disabled = true;
                resetCopyButtons();
                updateActiveStyles();
            }

            function updateActiveStyles() {
                const items = elements.postList.querySelectorAll(".post-item");
                items.forEach((el) => {
                    const id = parseInt(el.dataset.id, 10);
                    if (!isNaN(id) && id === state.activeId) {
                        el.classList.add("active");
                    } else {
                        el.classList.remove("active");
                    }
                });
            }

            function copyCurrent(mode) {
                if (state.activeId === null || state.activeId === undefined)
                    return;
                const post = state.posts.find((p) => p.id === state.activeId);
                if (!post || !post.content) return;

                const title = post.title || "";
                const content = post.content || "";
                const tags = (post.tags || []).filter(
                    (t) => typeof t === "string" && t.trim().length > 0,
                );

                let textToCopy = "";

                if (mode === "html") {
                    // –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è: –∑–∞–≥–æ–ª–æ–≤–æ–∫ + —Ç–µ–∫—Å—Ç (–∞–±–∑–∞—Ü—ã –ø–æ –¥–≤–æ–π–Ω–æ–º—É –ø–µ—Ä–µ–≤–æ–¥—É —Å—Ç—Ä–æ–∫–∏) + —Ç–µ–≥–∏ –≤ –∫–æ–Ω—Ü–µ
                    const paragraphs = content
                        .split(/\n{2,}/)
                        .map((p) => p.trim())
                        .filter(Boolean);
                    if (title) textToCopy += title + "\n\n";
                    textToCopy += paragraphs.join("\n\n");
                    if (tags.length) {
                        textToCopy +=
                            "\n\n" + tags.map((t) => "#" + t).join(" ");
                    }
                } else {
                    // Plain text: –∫–∞–∫ –≤ JSON + —Ç–µ–≥–∏ –≤ –∫–æ–Ω—Ü–µ
                    textToCopy = content || "";
                    if (tags.length) {
                        const sep = textToCopy ? "\n\n" : "";
                        textToCopy += sep + tags.map((t) => "#" + t).join(" ");
                    }
                }

                const targetBtn =
                    mode === "html"
                        ? elements.copyHtmlBtn
                        : elements.copyPlainBtn;
                doCopy(textToCopy, targetBtn);
            }

            function doCopy(text, buttonEl) {
                if (!navigator.clipboard || !navigator.clipboard.writeText) {
                    const textarea = document.createElement("textarea");
                    textarea.value = text;
                    textarea.style.position = "fixed";
                    textarea.style.top = "-9999px";
                    textarea.style.left = "-9999px";
                    document.body.appendChild(textarea);
                    textarea.focus();
                    textarea.select();
                    try {
                        document.execCommand("copy");
                        markCopied(buttonEl);
                    } catch (e) {
                        console.error("Copy failed", e);
                    } finally {
                        document.body.removeChild(textarea);
                    }
                    return;
                }

                navigator.clipboard
                    .writeText(text)
                    .then(() => {
                        markCopied(buttonEl);
                    })
                    .catch((err) => {
                        console.error("Clipboard error", err);
                    });
            }

            function markCopied(buttonEl) {
                if (!buttonEl) return;
                resetCopyButtons();
                buttonEl.classList.add("copied");
                buttonEl.innerHTML =
                    '<span class="icon">‚úî</span><span>–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ</span>';

                if (state.lastCopyTimeout) {
                    clearTimeout(state.lastCopyTimeout);
                }
                state.lastCopyTimeout = setTimeout(() => {
                    resetCopyButtons();
                }, 2000);
            }

            function resetCopyButtons() {
                [elements.copyHtmlBtn, elements.copyPlainBtn].forEach((btn) => {
                    if (!btn) return;
                    btn.classList.remove("copied");
                    if (!btn.disabled) {
                        if (btn === elements.copyHtmlBtn) {
                            btn.innerHTML =
                                '<span class="icon">‚ßâ</span><span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º</span>';
                        } else {
                            btn.innerHTML =
                                '<span class="icon">‚ßâ</span><span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Ç–µ–∫—Å—Ç</span>';
                        }
                    } else {
                        if (btn === elements.copyHtmlBtn) {
                            btn.innerHTML =
                                '<span class="icon">‚ßâ</span><span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º</span>';
                        } else {
                            btn.innerHTML =
                                '<span class="icon">‚ßâ</span><span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Ç–µ–∫—Å—Ç</span>';
                        }
                    }
                });
            }
        </script>
    </body>
</html>
